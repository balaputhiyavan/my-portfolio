---
import { Icon } from "astro-icon/components";
import { Layers2, Globe, FlaskConical, Users } from "lucide-react";

interface SkillCardProps {
    icon: string;
    name: string;
    description: string;
    showDescription?: boolean;
}

const { icon, name, description, showDescription = true } = Astro.props as SkillCardProps;

// Lucide Icon Mapping (Only for generic concepts)
const lucideIcons: Record<string, any> = {
    "layers-2": Layers2, // Architecture
    globe: Globe,        // API
    "flask-conical": FlaskConical, // Testing
    users: Users,        // Collaboration
};

const isImage = icon.endsWith(".png") || icon.endsWith(".jpg") || icon.endsWith(".jpeg") || icon.endsWith(".svg");
const isSimpleIcon = icon.startsWith("simple-icons:");
const imagePath = isImage ? `${icon}` : null;

// Determine grid span based on description presence (Hard vs Soft skills layout)
const cardClass = showDescription 
    ? "glass-panel p-6 rounded-[32px] h-full flex flex-col gap-4 hover:border-accent-cyan/50 transition-all duration-300 hover:scale-[1.02] group" 
    : "glass-panel p-6 rounded-[32px] h-full flex flex-col items-center justify-center gap-3 hover:border-accent-pink/50 transition-all duration-300 hover:scale-105 text-center group";
---

<div class={cardClass}>
    <div class="w-12 h-12 flex items-center justify-center rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-white/5 p-2.5 group-hover:bg-primary-light/10 dark:group-hover:bg-primary-dark/10 transition-colors duration-300">
        {
            imagePath 
            ? <img src={imagePath} alt={name} class="w-full h-full object-contain" />
            : (lucideIcons[icon] 
                ? <div class="text-primary-light dark:text-primary-dark w-full h-full [&>svg]:w-full [&>svg]:h-full">{() => { const Icon = lucideIcons[icon]; return <Icon /> }}</div>
                : <Icon name={icon} class="w-full h-full text-primary-light dark:text-primary-dark" />)
        }
    </div>
    
    <div>
        <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-2">{name}</h3>
        { showDescription && <p class="text-sm text-slate-500 dark:text-slate-400 leading-relaxed font-medium">{description}</p> }
    </div>
</div>
